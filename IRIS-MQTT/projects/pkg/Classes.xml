<?xml version="1.0" encoding="UTF-8"?>
<Export generator="IRIS" version="26" zv="IRIS for UNIX (Ubuntu Server LTS for x86-64 Containers) 2019.1 (Build 511U)" ts="2019-07-22 20:37:46">
<Class name="DriveDemo.Data.CarLatest">
<Super>%Persistent</Super>
<TimeChanged>65206,63715.091922</TimeChanged>
<TimeCreated>65206,59886.347208</TimeCreated>

<Property name="CarId">
<Type>%String</Type>
</Property>

<Property name="Tm">
<Type>%TimeStamp</Type>
</Property>

<Property name="RelativeTm">
<Type>%Integer</Type>
</Property>

<Property name="Longitude">
<Type>%Float</Type>
</Property>

<Property name="Latitude">
<Type>%Float</Type>
</Property>

<Property name="Azimuth">
<Type>%Float</Type>
</Property>

<Property name="Speed">
<Type>%Float</Type>
</Property>

<Property name="EngineRPM">
<Type>%Float</Type>
</Property>

<Property name="AccelPos">
<Type>%Float</Type>
</Property>

<Property name="BrakeSW">
<Type>%Boolean</Type>
</Property>

<Property name="AcumDistance">
<Type>%Float</Type>
</Property>

<Property name="AcumFuel">
<Type>%Float</Type>
</Property>

<Property name="FuelInjection">
<Type>%Float</Type>
</Property>

<Property name="aX">
<Type>%Float</Type>
</Property>

<Property name="aY">
<Type>%Float</Type>
</Property>

<Property name="aZ">
<Type>%Float</Type>
</Property>

<Index name="MainIdx">
<Properties>CarId</Properties>
</Index>

<Index name="TmIdx">
<Properties>Tm</Properties>
</Index>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DataLocation>^DriveDemo.Data.CarLatestD</DataLocation>
<DefaultData>CarLatestDefaultData</DefaultData>
<IdLocation>^DriveDemo.Data.CarLatestD</IdLocation>
<IndexLocation>^DriveDemo.Data.CarLatestI</IndexLocation>
<StreamLocation>^DriveDemo.Data.CarLatestS</StreamLocation>
<Data name="CarLatestDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>CarId</Value>
</Value>
<Value name="3">
<Value>Tm</Value>
</Value>
<Value name="4">
<Value>Longitude</Value>
</Value>
<Value name="5">
<Value>Latitude</Value>
</Value>
<Value name="6">
<Value>Azimuth</Value>
</Value>
<Value name="7">
<Value>Speed</Value>
</Value>
<Value name="8">
<Value>EngineRPM</Value>
</Value>
<Value name="9">
<Value>AccelPos</Value>
</Value>
<Value name="10">
<Value>BrakeSW</Value>
</Value>
<Value name="11">
<Value>AcumDistance</Value>
</Value>
<Value name="12">
<Value>AcumFuel</Value>
</Value>
<Value name="13">
<Value>FuelInjection</Value>
</Value>
<Value name="14">
<Value>aX</Value>
</Value>
<Value name="15">
<Value>aY</Value>
</Value>
<Value name="16">
<Value>aZ</Value>
</Value>
<Value name="17">
<Value>RelativeTm</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.Data.DriveRecord">
<Super>%Persistent,%XML.Adaptor</Super>
<TimeChanged>65205,66773.310576</TimeChanged>
<TimeCreated>65205,66750.001256</TimeCreated>

<Property name="CarId">
<Type>%String</Type>
</Property>

<Property name="RelativeTm">
<Type>%Integer</Type>
</Property>

<Property name="Longitude">
<Type>%Float</Type>
</Property>

<Property name="Latitude">
<Type>%Float</Type>
</Property>

<Property name="Azimuth">
<Type>%Float</Type>
</Property>

<Property name="Speed">
<Type>%Float</Type>
</Property>

<Property name="EngineRPM">
<Type>%Float</Type>
</Property>

<Property name="AccelPos">
<Type>%Float</Type>
</Property>

<Property name="BrakeSW">
<Type>%Boolean</Type>
</Property>

<Property name="AcumDistance">
<Type>%Float</Type>
</Property>

<Property name="AcumFuel">
<Type>%Float</Type>
</Property>

<Property name="FuelInjection">
<Type>%Float</Type>
</Property>

<Property name="aX">
<Type>%Float</Type>
</Property>

<Property name="aY">
<Type>%Float</Type>
</Property>

<Property name="aZ">
<Type>%Float</Type>
</Property>

<Index name="MainIdx">
<Properties>CarId</Properties>
</Index>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DataLocation>^DriveDemo.Data.DriveRecordD</DataLocation>
<DefaultData>DriveRecordDefaultData</DefaultData>
<IdLocation>^DriveDemo.Data.DriveRecordD</IdLocation>
<IndexLocation>^DriveDemo.Data.DriveRecordI</IndexLocation>
<StreamLocation>^DriveDemo.Data.DriveRecordS</StreamLocation>
<Data name="DriveRecordDefaultData">
<Structure>listnode</Structure>
<Subscript/>
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>CarId</Value>
</Value>
<Value name="3">
<Value>RelativeTm</Value>
</Value>
<Value name="4">
<Value>Longitude</Value>
</Value>
<Value name="5">
<Value>Latitude</Value>
</Value>
<Value name="6">
<Value>Azimuth</Value>
</Value>
<Value name="7">
<Value>Speed</Value>
</Value>
<Value name="8">
<Value>EngineRPM</Value>
</Value>
<Value name="9">
<Value>AccelPos</Value>
</Value>
<Value name="10">
<Value>BrakeSW</Value>
</Value>
<Value name="11">
<Value>AcumDistance</Value>
</Value>
<Value name="12">
<Value>AcumFuel</Value>
</Value>
<Value name="13">
<Value>FuelInjection</Value>
</Value>
<Value name="14">
<Value>aX</Value>
</Value>
<Value name="15">
<Value>aY</Value>
</Value>
<Value name="16">
<Value>aZ</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.Data.DrivingBehavior">
<Super>%RegisteredObject</Super>
<TimeChanged>65211,3016.337889</TimeChanged>
<TimeCreated>65211,2888.716063</TimeCreated>

<Property name="IsNormal">
<Type>%Boolean</Type>
</Property>

<Property name="IsOverSpeed">
<Type>%Boolean</Type>
</Property>

<Property name="IsHighEngineRPM">
<Type>%Boolean</Type>
</Property>
</Class>


<Class name="DriveDemo.DemoProcessRoutingRule">
<Description>
</Description>
<Super>Ens.Rule.Definition</Super>
<TimeChanged>65212,269.471829</TimeChanged>
<TimeCreated>65126,38470.15954</TimeCreated>

<Parameter name="RuleAssistClass">
<Default>EnsLib.MsgRouter.VDocRuleAssist</Default>
</Parameter>

<XData name="RuleDefinition">
<XMLNamespace>http://www.intersystems.com/rule</XMLNamespace>
<Data><![CDATA[
<ruleDefinition alias="" context="EnsLib.MsgRouter.VDocRoutingEngine" production="DriveDemo.Production">
<ruleSet name="" effectiveBegin="" effectiveEnd="">
<rule name="" disabled="false">
<constraint name="source" value="MQTTIn"></constraint>
<constraint name="msgClass" value="EnsLib.EDI.XML.Document"></constraint>
<constraint name="docCategory" value="mqtt_schema_driverecord"></constraint>
<constraint name="docName" value="message"></constraint>
<when condition="Piece(Document.{type},&quot;/&quot;,3,3)=&quot;start&quot;">
<send transform="DriveDemo.VDocToCarRegisterRequest" target="CarOperation"></send>
</when>
<when condition="Piece(Document.{type},&quot;/&quot;,3,3)=&quot;drive&quot;">
<send transform="DriveDemo.VDocToCheckDriveRequest" target="CheckDriveProcess"></send>
<send transform="DriveDemo.VDocToStringContainer" target="CarOperation"></send>
</when>
</rule>
</ruleSet>
</ruleDefinition>
]]></Data>
</XData>
</Class>


<Class name="DriveDemo.Operation.CarUpdateOperation">
<ClassType/>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.BusinessOperation</Super>
<TimeChanged>65210,41845.162537</TimeChanged>
<TimeCreated>65206,64643.489865</TimeCreated>

<Parameter name="INVOCATION">
<Description>
2 modes: Queue, InProc</Description>
<Default>Queue</Default>
</Parameter>

<XData name="MessageMap">
<Data><![CDATA[
<MapItems>
    <MapItem MessageType="DriveDemo.Request.CarRegisterRequest">
        <Method>RegisterCar</Method>
    </MapItem>
    <MapItem MessageType="DriveDemo.Request.CarUpdateRequest">
        <Method>UpdateCar</Method>
    </MapItem>
</MapItems>
]]></Data>
</XData>

<Method name="RegisterCar">
<FormalSpec>pRequest:DriveDemo.Request.CarRegisterRequest,*pResponse:Ens.Response</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
    Set carid = pRequest.CarId
    Set ts = pRequest.StartTime
    $$$TRACE("Car ID: "_carid_",  Time: "_ts)

    &sql(DELETE FROM DriveDemo_Data.DriveRecord where CarId = :carid)
    &sql(DELETE FROM DriveDemo_Data.CarLatest where CarId = :carid)
    &sql(INSERT INTO DriveDemo_Data.CarLatest (CarId, Tm) values (:carid, :ts))
    
    Quit $$$OK
]]></Implementation>
</Method>

<Method name="UpdateCar">
<FormalSpec>pRequest:DriveDemo.Request.CarUpdateRequest,*pResponse:Ens.Response</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
 
    // 現在の運転情報を、CarLatestに記録
    Set tCarId = pRequest.Data.CarId
    Set tRelativeTm = pRequest.Data.RelativeTm
    Set tLongitude = pRequest.Data.Longitude
    Set tLatitude = pRequest.Data.Latitude
    Set tAzimuth = pRequest.Data.Azimuth
    Set tSpeed = pRequest.Data.Speed
    Set tEngineRPM = pRequest.Data.EngineRPM
    Set tAccelPos = pRequest.Data.AccelPos
    Set tBrakeSW = pRequest.Data.BrakeSW
    Set tAcumDistance = pRequest.Data.AcumDistance
    Set tAcumFuel = pRequest.Data.AcumFuel
    Set tFuelInjection = pRequest.Data.FuelInjection
    Set taX = pRequest.Data.aX
    Set taY = pRequest.Data.aY
    Set taZ = pRequest.Data.aZ

    &sql(UPDATE DriveDemo_Data.CarLatest SET RelativeTm = :tRelativeTm, Longitude = :tLongitude, Latitude = :tLatitude, Azimuth = :tAzimuth, Speed = :tSpeed, EngineRPM = :tEngineRPM, AccelPos = :tAccelPos, BrakeSW = :tBrakeSW, AcumDistance = :tAcumDistance, AcumFuel = :tAcumFuel, FuelInjection = :tFuelInjection, aX = :taX, aY = :taY, aZ = :taZ where CarId = :tCarId)
 
    $$$TRACE("Car ID: "_tCarId_",  Speed: "_tSpeed)
 
    /*
	If tFlag="R" {
		If pRequest.Location["Error" Quit $$$ERROR($$$GeneralError,"User triggered error")
		Set pResponse=##class(Ens.Response).%New()
		Set pResponse.IsTooHigh=pRequest.WaterLevel>500
		$$$TRACE("Registration of water level finished.")
		Quit $$$OK
	} Else {
		Quit $$$EnsError($$$GeneralError,"User triggered error")
    }
    */
    Quit $$$OK
]]></Implementation>
</Method>
</Class>


<Class name="DriveDemo.Operation.CheckDriveOperation">
<ClassType/>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.BusinessOperation</Super>
<TimeChanged>65212,1298.735211</TimeChanged>
<TimeCreated>65211,84649.666717</TimeCreated>

<Parameter name="INVOCATION">
<Description>
2 modes: Queue, InProc</Description>
<Default>Queue</Default>
</Parameter>

<XData name="MessageMap">
<Data><![CDATA[
<MapItem MessageType="DriveDemo.Request.CheckDriveRequest">
        <Method>CheckDrive</Method>
    </MapItem>
]]></Data>
</XData>

<Method name="CheckDrive">
<FormalSpec>pRequest:DriveDemo.Request.CheckDriveRequest,*pResponse:DriveDemo.Response.CheckDriveResponse</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
    Set pResponse=##class(DriveDemo.Response.CheckDriveResponse).%New()
    Set pResponse.hasEvent = 0
    Set pResponse.DrivingBehavior = ##class(DriveDemo.Data.DrivingBehavior).%New()

    Set tRelTm = pRequest.RelativeTm
    &sql(SELECT AVG(speed) into :tAvgSpeed FROM DriveDemo_Data.DriveRecord WHERE RelativeTm BETWEEN :tRelTm - 5 AND :tRelTm)
    $$$TRACE("Car ID: "_pRequest.CarId_", Average Speed: "_tAvgSpeed)


    Quit $$$OK
]]></Implementation>
</Method>
</Class>


<Class name="DriveDemo.Process.CheckDriveProcess">
<Description>
</Description>
<Super>Ens.BusinessProcessBPL</Super>
<TimeChanged>65212,35.828245</TimeChanged>
<TimeCreated>65211,85233.391281</TimeCreated>

<XData name="BPL">
<Description>
BPL Definition</Description>
<XMLNamespace>http://www.intersystems.com/bpl</XMLNamespace>
<Data><![CDATA[
<process language='objectscript' request='DriveDemo.Request.CheckDriveRequest' response='DriveDemo.Response.CheckDriveResponse' height='2000' width='2000' >
<sequence xend='200' yend='350' >
<call name='CheckDrivingBehavior' target='CheckDriveOperation' async='0' xpos='200' ypos='250' >
<request type='DriveDemo.Request.CheckDriveRequest' >
<assign property="callrequest" value="request" action="set" />
</request>
<response type='DriveDemo.Response.CheckDriveResponse' >
<assign property="response" value="callresponse" action="set" />
</response>
</call>
</sequence>
</process>
]]></Data>
</XData>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
</Storage>
</Class>


<Class name="DriveDemo.Production">
<Super>Ens.Production</Super>
<TimeChanged>65211,86310.391475</TimeChanged>
<TimeCreated>65205,39772.533129</TimeCreated>

<XData name="ProductionDefinition">
<Data><![CDATA[
<Production Name="DriveDemo.Production" LogGeneralTraceEvents="false">
  <Description></Description>
  <ActorPoolSize>5</ActorPoolSize>
  <Item Name="EnsLib.JavaGateway.Initiator" Category="" ClassName="EnsLib.JavaGateway.Initiator" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
    <Setting Target="Host" Name="ClassPath">/projects/srcs/java/lib/org.eclipse.paho.client.mqttv3-1.2.0.jar</Setting>
  </Item>
  <Item Name="RoutingProcess" Category="" ClassName="EnsLib.MsgRouter.VDocRoutingEngine" PoolSize="5" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
    <Setting Target="Host" Name="BusinessRuleName">DriveDemo.DemoProcessRoutingRule</Setting>
  </Item>
  <Item Name="MQTTIn" Category="" ClassName="JBH.Com.Intersystems.Drivedemo.MqttBS" PoolSize="0" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
    <Setting Target="Host" Name="DocSchemaCategory">mqtt_schema_driverecord</Setting>
    <Setting Target="Host" Name="MQTTBroker">tcp://mqttbroker:1883</Setting>
    <Setting Target="Host" Name="MQTTClientName">InterSystemsIRIS</Setting>
    <Setting Target="Host" Name="MQTTTopicRoot">DriveDemo/#</Setting>
    <Setting Target="Host" Name="TargetConfigNames">RoutingProcess</Setting>
  </Item>
  <Item Name="CarOperation" Category="" ClassName="DriveDemo.Operation.CarUpdateOperation" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
  </Item>
  <Item Name="CheckDriveOperation" Category="" ClassName="DriveDemo.Operation.CheckDriveOperation" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="true" Schedule="">
  </Item>
  <Item Name="CheckDriveProcess" Category="" ClassName="DriveDemo.Process.CheckDriveProcess" PoolSize="1" Enabled="true" Foreground="false" Comment="" LogTraceEvents="false" Schedule="">
  </Item>
</Production>
]]></Data>
</XData>
</Class>


<Class name="DriveDemo.Request.CarRegisterRequest">
<ClassType>persistent</ClassType>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.Request</Super>
<TimeChanged>65210,51122.368184</TimeChanged>
<TimeCreated>65206,59084.97983</TimeCreated>

<Property name="CarId">
<Type>%String</Type>
</Property>

<Property name="StartTime">
<Type>%TimeStamp</Type>
</Property>

<Property name="Type">
<Type>%String</Type>
</Property>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DefaultData>CarRegisterRequestDefaultData</DefaultData>
<Data name="CarRegisterRequestDefaultData">
<Subscript>"CarRegisterRequest"</Subscript>
<Value name="1">
<Value>CarId</Value>
</Value>
<Value name="2">
<Value>StartTime</Value>
</Value>
<Value name="3">
<Value>Type</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.Request.CarUpdateRequest">
<ClassType>persistent</ClassType>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.Request</Super>
<TimeChanged>65211,84241.390749</TimeChanged>
<TimeCreated>65205,43428.04414</TimeCreated>

<Property name="Data">
<Type>DriveDemo.Data.DriveRecord</Type>
</Property>

<UDLText name="T">
<Content><![CDATA[
// Property jsonData As %XML.String(MAXLEN = 32767);

]]></Content>
</UDLText>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DefaultData>CarUpdateRequestDefaultData</DefaultData>
<Data name="CarUpdateRequestDefaultData">
<Subscript>"CarUpdateRequest"</Subscript>
<Value name="1">
<Value>CarId</Value>
</Value>
<Value name="2">
<Value>jsonData</Value>
</Value>
<Value name="3">
<Value>Data</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.Request.CheckDriveRequest">
<ClassType>persistent</ClassType>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.Request</Super>
<TimeChanged>65211,84073.396088</TimeChanged>
<TimeCreated>65211,83928.144902</TimeCreated>

<Property name="CarId">
<Type>%String</Type>
</Property>

<Property name="RelativeTm">
<Type>%Integer</Type>
</Property>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DefaultData>CheckDriveRequestDefaultData</DefaultData>
<Data name="CheckDriveRequestDefaultData">
<Subscript>"CheckDriveRequest"</Subscript>
<Value name="1">
<Value>CarId</Value>
</Value>
<Value name="2">
<Value>RelativeTm</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.Response.CheckDriveResponse">
<ClassType>persistent</ClassType>
<ProcedureBlock>1</ProcedureBlock>
<Super>Ens.Response</Super>
<TimeChanged>65211,84739.910432</TimeChanged>
<TimeCreated>65211,84739.910432</TimeCreated>

<Property name="hasEvent">
<Type>%Boolean</Type>
</Property>

<Property name="DrivingBehavior">
<Type>DriveDemo.Data.DrivingBehavior</Type>
</Property>

<Storage name="Default">
<Type>%Storage.Persistent</Type>
<DefaultData>CarUpdateRequestDefaultData</DefaultData>
<Data name="CarUpdateRequestDefaultData">
<Subscript>"CarUpdateRequest"</Subscript>
<Value name="1">
<Value>hasEvent</Value>
</Value>
<Value name="2">
<Value>DrivingBehavior</Value>
</Value>
</Data>
</Storage>
</Class>


<Class name="DriveDemo.VDocToCarRegisterRequest">
<Super>Ens.DataTransformDTL</Super>
<TimeChanged>65210,51195.347065</TimeChanged>
<TimeCreated>65206,60590.189861</TimeCreated>
<DependsOn>EnsLib.EDI.XML.Document,DriveDemo.Request.CarRegisterRequest</DependsOn>

<Parameter name="IGNOREMISSINGSOURCE">
<Default>1</Default>
</Parameter>

<Parameter name="REPORTERRORS">
<Default>1</Default>
</Parameter>

<Parameter name="TREATEMPTYREPEATINGFIELDASNULL">
<Default>0</Default>
</Parameter>

<XData name="DTL">
<XMLNamespace>http://www.intersystems.com/dtl</XMLNamespace>
<Data><![CDATA[
<transform sourceClass='EnsLib.EDI.XML.Document' targetClass='DriveDemo.Request.CarRegisterRequest' sourceDocType='mqtt_schema_driverecord:message' create='new' language='objectscript' >
<assign value='..Piece(source.{type},"/",2)' property='target.CarId' action='set' />
<assign value='source.{DriveRecord.starttime}' property='target.StartTime' action='set' />
<assign value='..Piece(source.{type},"/",3)' property='target.Type' action='set' />
</transform>
]]></Data>
</XData>
</Class>


<Class name="DriveDemo.VDocToCheckDriveRequest">
<Super>Ens.DataTransformDTL</Super>
<TimeChanged>65211,84417.441494</TimeChanged>
<TimeCreated>65211,84377.26604</TimeCreated>
<DependsOn>EnsLib.EDI.XML.Document,DriveDemo.Request.CheckDriveRequest</DependsOn>

<Parameter name="IGNOREMISSINGSOURCE">
<Default>1</Default>
</Parameter>

<Parameter name="REPORTERRORS">
<Default>1</Default>
</Parameter>

<Parameter name="TREATEMPTYREPEATINGFIELDASNULL">
<Default>0</Default>
</Parameter>

<XData name="DTL">
<XMLNamespace>http://www.intersystems.com/dtl</XMLNamespace>
<Data><![CDATA[
<transform sourceClass='EnsLib.EDI.XML.Document' targetClass='DriveDemo.Request.CheckDriveRequest' sourceDocType='mqtt_schema_driverecord:message' create='new' language='objectscript' >
<assign value='..Piece(source.{type},"/",2)' property='target.CarId' action='set' />
<assign value='source.{DriveRecord.time}' property='target.RelativeTm' action='set' />
</transform>
]]></Data>
</XData>
</Class>


<Class name="DriveDemo.VDocToStringContainer">
<Super>Ens.DataTransformDTL</Super>
<TimeChanged>65205,68303.768615</TimeChanged>
<TimeCreated>65126,38644.046317</TimeCreated>
<DependsOn>EnsLib.EDI.XML.Document,DriveDemo.Request.CarUpdateRequest</DependsOn>

<Parameter name="IGNOREMISSINGSOURCE">
<Default>1</Default>
</Parameter>

<Parameter name="REPORTERRORS">
<Default>1</Default>
</Parameter>

<Parameter name="TREATEMPTYREPEATINGFIELDASNULL">
<Default>0</Default>
</Parameter>

<XData name="DTL">
<XMLNamespace>http://www.intersystems.com/dtl</XMLNamespace>
<Data><![CDATA[
<transform sourceClass='EnsLib.EDI.XML.Document' targetClass='DriveDemo.Request.CarUpdateRequest' sourceDocType='mqtt_schema_driverecord:message' create='new' language='objectscript' >
<assign value='source.{DriveRecord}' property='target.Data' action='set' />
<assign value='..Piece(source.{type},"/",2)' property='target.Data.CarId' action='set' />
<assign value='source.{DriveRecord.time}' property='target.Data.RelativeTm' action='set' />
<assign value='source.{DriveRecord.longitude}' property='target.Data.Longitude' action='set' />
<assign value='source.{DriveRecord.azimuth}' property='target.Data.Azimuth' action='set' />
<assign value='source.{DriveRecord.car_speed}' property='target.Data.Speed' action='set' />
<assign value='source.{DriveRecord.engine_rpm}' property='target.Data.EngineRPM' action='set' />
<assign value='source.{DriveRecord.accel_pos}' property='target.Data.AccelPos' action='set' />
<assign value='source.{DriveRecord.brake_sw}' property='target.Data.BrakeSW' action='set' />
<assign value='source.{DriveRecord.accum_dist}' property='target.Data.AcumDistance' action='set' />
<assign value='source.{DriveRecord.accum_fuel}' property='target.Data.AcumFuel' action='set' />
<assign value='source.{DriveRecord.fuel_injection}' property='target.Data.FuelInjection' action='set' />
<assign value='source.{DriveRecord.a_000_x}' property='target.Data.aX' action='set' />
<assign value='source.{DriveRecord.a_000_y}' property='target.Data.aY' action='set' />
<assign value='source.{DriveRecord.a_000_z}' property='target.Data.aZ' action='set' />
<assign value='source.{DriveRecord.latitude}' property='target.Data.Latitude' action='set' />
</transform>
]]></Data>
</XData>
</Class>
</Export>
